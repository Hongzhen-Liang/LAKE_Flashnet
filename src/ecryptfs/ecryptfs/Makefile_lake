#
# Makefile for the Linux eCryptfs
#

obj-$(CONFIG_ECRYPT_FS) += lake_ecryptfs.o

lake_ecryptfs-y := dentry.o file.o inode.o main.o super.o mmap.o read_write.o \
	      crypto.o keystore.o kthread.o debug.o lake.o

lake_ecryptfs-$(CONFIG_ECRYPT_FS_MESSAGING) += messaging.o miscdev.o

all:
	make CFLAGS_MODULE='-DLAKE_ECRYPTFS=1' -C /lib/modules/$(shell uname -r)/build M=$(shell pwd) modules
	rm *.o
	rm .*o.cmd

clean:
	make -C /lib/modules/$(shell uname -r)/build M=$(shell pwd) clean